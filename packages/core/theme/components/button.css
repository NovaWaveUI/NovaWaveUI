@layer components {
  /* Root Button */
  .nw-button {
    /* Base */
    @apply z-0 inline-flex relative flex-row items-center justify-center min-w-max outline-hidden select-none text-wrap overflow-hidden pointer-events-auto;
    @apply cursor-pointer;
    /* Transition */
    @apply transition-all duration-100 ease-in-out;

    /* Focus Visible */
    @variant focus-visible {
      @apply focus-outline;
    }

    /* Active/Pressed State */
    @variant pressed {
      @apply scale-95;
    }

    /* Size */
    @variant size-sm {
      @apply px-3 min-w-16 min-h-8 gap-2 text-sm;
    }

    @variant size-md {
      @apply px-4 min-w-20 min-h-10 gap-2 text-base;
    }

    @variant size-lg {
      @apply px-6 min-w-24 min-h-12 gap-3 text-lg;
    }

    /* Radius */
    @variant radius-none {
      @apply rounded-none;
    }

    @variant radius-sm {
      @apply rounded-sm;
    }

    @variant radius-md {
      @apply rounded-md;
    }

    @variant radius-lg {
      @apply rounded-lg;
    }

    @variant radius-xl {
      @apply rounded-xl;
    }

    @variant radius-full {
      @apply rounded-full;
    }

    /* Disabled State */
    @variant disabled {
      @apply opacity-disabled pointer-events-none;
    }

    /* Loading State */
    @variant loading {
      @apply opacity-disabled pointer-events-none;
    }

    /* Icon Only */
    &[data-icon-only] {
      @apply px-0 !gap-0;

      /* Size - Small */
      @variant size-sm {
        @apply min-w-8 w-8 h-8;
      }

      /* Size - Medium */
      @variant size-md {
        @apply min-w-10 w-10 h-10;
      }

      /* Size - Large */
      @variant size-lg {
        @apply min-w-12 w-12 h-12;
      }
    }

    /* Variants and Colors */
    @variant variant-solid {
      /* Neutral */
      @variant color-neutral {
        @apply bg-neutral text-on-neutral;
        @apply hover:bg-neutral-hover;
        @apply pressed:bg-neutral-active;
      }

      /* Primary */
      @variant color-primary {
        @apply bg-primary text-on-primary;
        @apply hover:bg-primary-hover;
        @apply pressed:bg-primary-active;
      }

      /* Secondary */
      @variant color-secondary {
        @apply bg-secondary text-on-secondary;
        @apply hover:bg-secondary-hover;
        @apply pressed:bg-secondary-active;
      }

      /* Success */
      @variant color-success {
        @apply bg-success text-on-success;
        @apply hover:bg-success-hover;
        @apply pressed:bg-success-active;
      }

      /* Warning */
      @variant color-warning {
        @apply bg-warning text-on-warning;
        @apply hover:bg-warning-hover;
        @apply pressed:bg-warning-active;
      }

      /* Danger */
      @variant color-danger {
        @apply bg-danger text-on-danger;
        @apply hover:bg-danger-hover;
        @apply pressed:bg-danger-active;
      }
    }

    /* Bordered */
    @variant variant-bordered {
      /* Base border style */
      @apply bg-transparent border-md border-solid;

      /* Neutral */
      @variant color-neutral {
        @apply border-neutral text-neutral;
        @apply hover:border-neutral-hover;
        @apply pressed:border-neutral-active;
      }

      /* Primary */
      @variant color-primary {
        @apply border-primary text-primary;
        @apply hover:border-primary-hover;
        @apply pressed:border-primary-active;
      }

      /* Secondary */
      @variant color-secondary {
        @apply border-secondary text-secondary;
        @apply hover:border-secondary-hover;
        @apply pressed:border-secondary-active;
      }

      /* Success */
      @variant color-success {
        @apply border-success text-success;
        @apply hover:border-success-hover;
        @apply pressed:border-success-active;
      }

      /* Warning */
      @variant color-warning {
        @apply border-warning text-warning;
        @apply hover:border-warning-hover;
        @apply pressed:border-warning-active;
      }

      /* Danger */
      @variant color-danger {
        @apply border-danger text-danger;
        @apply hover:border-danger-hover;
        @apply pressed:border-danger-active;
      }
    }

    /* Ghost */
    @variant variant-ghost {
      @apply bg-transparent border-md border-solid;

      /* Neutral */
      @variant color-neutral {
        @apply border-neutral text-neutral;
        @apply hover:border-transparent hover:text-on-neutral hover:bg-neutral-hover;
        @apply pressed:bg-neutral-active pressed:text-on-neutral pressed:border-transparent;
      }

      /* Primary */
      @variant color-primary {
        @apply border-primary text-primary;
        @apply hover:border-transparent hover:text-on-primary hover:bg-primary-hover;
        @apply pressed:bg-primary-active pressed:text-on-primary pressed:border-transparent;
      }

      /* Secondary */
      @variant color-secondary {
        @apply border-secondary text-secondary;
        @apply hover:border-transparent hover:text-on-secondary hover:bg-secondary-hover;
        @apply pressed:bg-secondary-active pressed:text-on-secondary pressed:border-transparent;
      }

      /* Success */
      @variant color-success {
        @apply border-success text-success;
        @apply hover:border-transparent hover:text-on-success hover:bg-success-hover;
        @apply pressed:bg-success-active pressed:text-on-success pressed:border-transparent;
      }

      /* Warning */
      @variant color-warning {
        @apply border-warning text-warning;
        @apply hover:border-transparent hover:text-on-warning hover:bg-warning-hover;
        @apply pressed:bg-warning-active pressed:text-on-warning pressed:border-transparent;
      }

      /* Danger */
      @variant color-danger {
        @apply border-danger text-danger;
        @apply hover:border-transparent hover:text-on-danger hover:bg-danger-hover;
        @apply pressed:bg-danger-active pressed:text-on-danger pressed:border-transparent;
      }
    }

    /* Light */
    @variant variant-light {
      @apply bg-transparent border-transparent;

      /* Neutral */
      @variant color-neutral {
        @apply text-neutral;
        @apply hover:bg-neutral-subtle-hover hover:text-on-neutral-subtle;
        @apply pressed:bg-neutral-subtle-active pressed:text-on-neutral-subtle;
      }

      /* Primary */
      @variant color-primary {
        @apply text-primary;
        @apply hover:bg-primary-subtle-hover hover:text-on-primary-subtle;
        @apply pressed:bg-primary-subtle-active pressed:text-on-primary-subtle;
      }

      /* Secondary */
      @variant color-secondary {
        @apply text-secondary;
        @apply hover:bg-secondary-subtle-hover hover:text-on-secondary-subtle;
        @apply pressed:bg-secondary-subtle-active pressed:text-on-secondary-subtle;
      }

      /* Success */
      @variant color-success {
        @apply text-success;
        @apply hover:bg-success-subtle-hover hover:text-on-success-subtle;
        @apply pressed:bg-success-subtle-active pressed:text-on-success-subtle;
      }

      /* Warning */
      @variant color-warning {
        @apply text-warning;
        @apply hover:bg-warning-subtle-hover hover:text-on-warning-subtle;
        @apply pressed:bg-warning-subtle-active pressed:text-on-warning-subtle;
      }

      /* Danger */
      @variant color-danger {
        @apply text-danger;
        @apply hover:bg-danger-subtle-hover hover:text-on-danger-subtle;
        @apply pressed:bg-danger-subtle-active pressed:text-on-danger-subtle;
      }
    }
  }

  /* Slot styling (scoped to root) */
  .nw-button [data-slot='start-content'],
  .nw-button [data-slot='end-content'] {
    @apply inline-flex items-center justify-center;

    /* Size - Small */
    @variant size-sm {
      @apply w-3 h-3;
    }

    /* Size - Medium */
    @variant size-md {
      @apply w-4 h-4;
    }

    /* Size - Large */
    @variant size-lg {
      @apply w-5 h-5;
    }
  }

  .nw-button [data-slot='text'] {
    @apply inline-flex items-center text-inherit;
  }

  /* Catch any direct child of start/end-content */
  .nw-button [data-slot='start-content'] > *,
  .nw-button [data-slot='end-content'] > * {
    @apply flex-shrink-0 text-inherit;
  }

  /* Button Group */
  .nw-button-group {
    @apply inline-flex items-center justify-center h-auto;

    @variant orientation-horizontal {
      @apply flex-row;
    }

    @variant orientation-vertical {
      @apply flex-col;
    }
  }

  .nw-button-group[data-orientation='horizontal'] {
    & [data-in-group] {
      @apply -ms-0.5;

      &:first-child {
        @apply rounded-e-none;
      }

      &:last-child {
        @apply rounded-s-none;
      }

      &:not(:first-child):not(:last-child) {
        @apply rounded-none;
      }
    }
  }

  .nw-button-group[data-orientation='vertical'] {
    & [data-in-group] {
      @apply -mt-0.5;

      &:first-child {
        @apply mt-0 rounded-b-none;
      }

      &:last-child {
        @apply rounded-t-none;
      }

      &:not(:first-child):not(:last-child) {
        @apply rounded-none;
      }
    }
  }
}
