@layer components {
  /* Root Button */
  [data-component='button'] {
    /* Base */
    @apply z-0 inline-flex relative flex-row items-center justify-center min-w-max outline-hidden select-none text-wrap overflow-hidden pointer-events-auto;
    @apply cursor-pointer;
    /* Transition */
    @apply motion-safe:transition-all motion-safe:duration-100 motion-safe:ease-in-out;

    /* Focus Visible */
    @apply focus-visible:focus-outline;

    /* Active */
    @apply motion-safe:active:scale-95;

    /* Radius */
    @apply rounded-md;
    @apply radius-none:rounded-none;
    @apply radius-sm:rounded-sm;
    @apply radius-md:rounded-md;
    @apply radius-lg:rounded-lg;
    @apply radius-xl:rounded-xl;
    @apply radius-full:rounded-full;

    /* Size */
    @variant size-sm {
      @apply px-3 min-w-16 min-h-8 gap-2 text-sm;
    }

    @variant size-md {
      @apply px-4 min-w-20 min-h-10 gap-2 text-base;
    }

    @variant size-lg {
      @apply px-6 min-w-24 min-h-12 gap-3 text-lg;
    }

    /* Disabled State */
    @variant data-disabled {
      @apply opacity-disabled pointer-events-none;
    }

    /* Loading State */
    @variant data-loading {
      @apply opacity-disabled pointer-events-none;
    }

    /* Icon Only */
    &[data-icon-only] {
      @apply px-0 !gap-0;

      /* Size - Small */
      @variant size-sm {
        @apply min-w-8 w-8 h-8;
      }

      /* Size - Medium */
      @variant size-md {
        @apply min-w-10 w-10 h-10;
      }

      /* Size - Large */
      @variant size-lg {
        @apply min-w-12 w-12 h-12;
      }
    }

    /* Variants and Colors */
    @variant variant-solid {
      /* Neutral */
      @variant color-neutral {
        @apply bg-neutral text-on-neutral;
        @apply hover:bg-neutral-hover;
        @apply active:bg-neutral-active;
      }

      /* Primary */
      @variant color-primary {
        @apply bg-primary text-on-primary;
        @apply hover:bg-primary-hover;
        @apply active:bg-primary-active;
      }

      /* Secondary */
      @variant color-secondary {
        @apply bg-secondary text-on-secondary;
        @apply hover:bg-secondary-hover;
        @apply active:bg-secondary-active;
      }

      /* Success */
      @variant color-success {
        @apply bg-success text-on-success;
        @apply hover:bg-success-hover;
        @apply active:bg-success-active;
      }

      /* Warning */
      @variant color-warning {
        @apply bg-warning text-on-warning;
        @apply hover:bg-warning-hover;
        @apply active:bg-warning-active;
      }

      /* Danger */
      @variant color-danger {
        @apply bg-danger text-on-danger;
        @apply hover:bg-danger-hover;
        @apply active:bg-danger-active;
      }
    }

    /* Bordered */
    @variant variant-bordered {
      /* Base border style */
      @apply bg-transparent border-md border-solid;

      /* Neutral */
      @variant color-neutral {
        @apply border-neutral text-neutral;
        @apply hover:border-neutral-hover;
        @apply active:border-neutral-active;
      }

      /* Primary */
      @variant color-primary {
        @apply border-primary text-primary;
        @apply hover:border-primary-hover;
        @apply active:border-primary-active;
      }

      /* Secondary */
      @variant color-secondary {
        @apply border-secondary text-secondary;
        @apply hover:border-secondary-hover;
        @apply active:border-secondary-active;
      }

      /* Success */
      @variant color-success {
        @apply border-success text-success;
        @apply hover:border-success-hover;
        @apply active:border-success-active;
      }

      /* Warning */
      @variant color-warning {
        @apply border-warning text-warning;
        @apply hover:border-warning-hover;
        @apply active:border-warning-active;
      }

      /* Danger */
      @variant color-danger {
        @apply border-danger text-danger;
        @apply hover:border-danger-hover;
        @apply active:border-danger-active;
      }
    }

    /* Ghost */
    @variant variant-ghost {
      @apply bg-transparent border-md border-solid;

      /* Neutral */
      @variant color-neutral {
        @apply border-neutral text-neutral;
        @apply hover:border-transparent hover:text-on-neutral hover:bg-neutral-hover;
        @apply active:bg-neutral-active active:text-on-neutral active:border-transparent;
      }

      /* Primary */
      @variant color-primary {
        @apply border-primary text-primary;
        @apply hover:border-transparent hover:text-on-primary hover:bg-primary-hover;
        @apply active:bg-primary-active active:text-on-primary active:border-transparent;
      }

      /* Secondary */
      @variant color-secondary {
        @apply border-secondary text-secondary;
        @apply hover:border-transparent hover:text-on-secondary hover:bg-secondary-hover;
        @apply active:bg-secondary-active active:text-on-secondary active:border-transparent;
      }

      /* Success */
      @variant color-success {
        @apply border-success text-success;
        @apply hover:border-transparent hover:text-on-success hover:bg-success-hover;
        @apply active:bg-success-active active:text-on-success active:border-transparent;
      }

      /* Warning */
      @variant color-warning {
        @apply border-warning text-warning;
        @apply hover:border-transparent hover:text-on-warning hover:bg-warning-hover;
        @apply active:bg-warning-active active:text-on-warning active:border-transparent;
      }

      /* Danger */
      @variant color-danger {
        @apply border-danger text-danger;
        @apply hover:border-transparent hover:text-on-danger hover:bg-danger-hover;
        @apply active:bg-danger-active active:text-on-danger active:border-transparent;
      }
    }

    /* Light */
    @variant variant-light {
      @apply bg-transparent border-transparent;

      /* Neutral */
      @variant color-neutral {
        @apply text-neutral;
        @apply hover:bg-neutral-subtle-hover hover:text-on-neutral-subtle;
        @apply active:bg-neutral-subtle-active active:text-on-neutral-subtle;
      }

      /* Primary */
      @variant color-primary {
        @apply text-primary;
        @apply hover:bg-primary-subtle-hover hover:text-on-primary-subtle;
        @apply active:bg-primary-subtle-active active:text-on-primary-subtle;
      }

      /* Secondary */
      @variant color-secondary {
        @apply text-secondary;
        @apply hover:bg-secondary-subtle-hover hover:text-on-secondary-subtle;
        @apply active:bg-secondary-subtle-active active:text-on-secondary-subtle;
      }

      /* Success */
      @variant color-success {
        @apply text-success;
        @apply hover:bg-success-subtle-hover hover:text-on-success-subtle;
        @apply active:bg-success-subtle-active active:text-on-success-subtle;
      }

      /* Warning */
      @variant color-warning {
        @apply text-warning;
        @apply hover:bg-warning-subtle-hover hover:text-on-warning-subtle;
        @apply active:bg-warning-subtle-active active:text-on-warning-subtle;
      }

      /* Danger */
      @variant color-danger {
        @apply text-danger;
        @apply hover:bg-danger-subtle-hover hover:text-on-danger-subtle;
        @apply active:bg-danger-subtle-active active:text-on-danger-subtle;
      }
    }
  }

  /* Slot styling (scoped to root) */
  [data-component='button'] [data-slot='start-content'],
  [data-component='button'] [data-slot='end-content'] {
    @apply inline-flex items-center justify-center w-4 h-4;
    @apply size-sm:w-3 size-sm:h-3;
    @apply size-lg:w-5 size-lg:h-5;
  }

  [data-component='button'] [data-slot='text'] {
    @apply inline-flex items-center text-inherit;
  }

  /* Catch any direct child of start/end-content */
  [data-component='button'] [data-slot='start-content'] > *,
  [data-component='button'] [data-slot='end-content'] > * {
    @apply flex-shrink-0 text-inherit;
  }

  /* Button Group */
  [data-component='button-group'] {
    @apply inline-flex items-center justify-center h-auto flex-row;
    @apply data-orientation-horizontal:flex-row data-orientation-vertical:flex-col;
  }

  [data-component='button-group'][data-orientation='horizontal'] {
    & [data-in-group] {
      @apply -ms-0.5;

      &:first-child {
        @apply rounded-e-none;
      }

      &:last-child {
        @apply rounded-s-none;
      }

      &:not(:first-child):not(:last-child) {
        @apply rounded-none;
      }
    }
  }

  [data-component='button-group'][data-orientation='vertical'] {
    & [data-in-group] {
      @apply -mt-0.5;

      &:first-child {
        @apply mt-0 rounded-b-none;
      }

      &:last-child {
        @apply rounded-t-none;
      }

      &:not(:first-child):not(:last-child) {
        @apply rounded-none;
      }
    }
  }
}
