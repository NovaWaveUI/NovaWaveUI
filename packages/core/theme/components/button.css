@layer components {
  /* Root Button */
  [data-component='button'] {
    /* Base */
    @apply z-0 inline-flex relative flex-row items-center justify-center min-w-max outline-hidden select-none text-wrap overflow-hidden pointer-events-auto;
    @apply cursor-pointer;
    @apply rounded;

    /* Transition */
    @apply motion-safe:transition-all motion-safe:duration-100 motion-safe:ease-in-out;

    /* Focus Visible */
    @apply focus-visible:focus-outline;

    /* Active */
    @apply motion-safe:active:scale-95;

    /* Size */
    @variant size-sm {
      @apply px-3 min-w-16 min-h-8 gap-2 text-sm;
    }

    @variant size-md {
      @apply px-4 min-w-20 min-h-10 gap-2 text-base;
    }

    @variant size-lg {
      @apply px-6 min-w-24 min-h-12 gap-3 text-lg;
    }

    /* Disabled State */
    @variant data-disabled {
      @apply opacity-disabled pointer-events-none;
    }

    /* Loading State */
    @variant data-loading {
      @apply opacity-disabled pointer-events-none;
    }

    /* Icon Only */
    &[data-icon-only] {
      @apply px-0 !gap-0;

      /* Size - Small */
      @variant size-sm {
        @apply min-w-8 w-8 h-8;
      }

      /* Size - Medium */
      @variant size-md {
        @apply min-w-10 w-10 h-10;
      }

      /* Size - Large */
      @variant size-lg {
        @apply min-w-12 w-12 h-12;
      }
    }

    /* Variants */
    /* Primary - Default / Call to Action */
    &[data-variant='primary'] {
      @apply bg-accent text-accent-foreground hover:bg-accent-hover active:bg-accent-active;
    }

    /* Secondary - Less Emphasis */
    &[data-variant='secondary'] {
      @apply bg-accent-soft text-accent-soft-foreground hover:bg-accent-soft-hover active:bg-accent-soft-active;
    }

    /* Tertiary - Minimal Emphasis */
    &[data-variant='tertiary'] {
      @apply bg-transparent text-neutral hover:bg-neutral-hover/10 active:bg-neutral-active/10;
    }

    /* Destructive - Dangerous Action */
    &[data-variant='destructive'] {
      @apply bg-danger text-danger-foreground hover:bg-danger-hover active:bg-danger-active;
    }

    /* Link - Text Link Style */
    &[data-variant='link'] {
      @apply bg-transparent text-accent underline-offset-4 hover:underline;
      @apply px-0 gap-1;
    }
  }

  /* Slot styling (scoped to root) */
  [data-component='button'] [data-slot='button-start-content'],
  [data-component='button'] [data-slot='button-end-content'] {
    @apply inline-flex items-center justify-center w-4 h-4;
    @apply size-sm:w-3 size-sm:h-3;
    @apply size-lg:w-5 size-lg:h-5;
  }

  [data-component='button'] [data-slot='button-text'] {
    @apply inline-flex items-center text-inherit;
  }

  /* Catch any direct child of start/end-content */
  [data-component='button'] [data-slot='button-start-content'] > *,
  [data-component='button'] [data-slot='button-end-content'] > * {
    @apply flex-shrink-0 text-inherit;
  }

  /* Button Group */
  [data-component='button-group'] {
    @apply inline-flex items-center justify-center h-auto flex-row;
    @apply data-orientation-horizontal:flex-row data-orientation-vertical:flex-col;
  }

  [data-component='button-group'][data-orientation='horizontal'] {
    & [data-in-group] {
      @apply -ms-0.5;

      &:first-child {
        @apply rounded-e-none;
      }

      &:last-child {
        @apply rounded-s-none;
      }

      &:not(:first-child):not(:last-child) {
        @apply rounded-none;
      }
    }
  }

  [data-component='button-group'][data-orientation='vertical'] {
    & [data-in-group] {
      @apply -mt-0.5;

      &:first-child {
        @apply mt-0 rounded-b-none;
      }

      &:last-child {
        @apply rounded-t-none;
      }

      &:not(:first-child):not(:last-child) {
        @apply rounded-none;
      }
    }
  }
}
